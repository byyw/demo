## 说明： 

​	MySQL和InfluxDB是两个不同类型的数据库，MySQL是关系型数据库，主要用于事务处理，支持SQL语言，而InfluxDB则是时间序列数据库，主要用于处理时间序列数据，支持InfluxQL语言。因此，MySQL和InfluxDB在很多方面有不同的优势和劣势。本比对报告将从多个角度对MySQL和InfluxDB进行比对。

## 测试环境： 

- 阿里云 ecs.c6e.large 2vCPU/4GiB

- 操作系统：Windows Server 2012 3800IOPS
- 存储：ESSD云盘，40GiB

## 测试用例：

​	样例1：time - tag1 - val1

​	样例2：time - [tag1...5] - [val1...100]

1. 写入性能测试(ms)：

   | 数据量 | mysql（样例1） | influxdb（样例1） | mysql（样例2） | influxdb（样例2） |
   | ------ | -------------- | ----------------- | -------------- | ----------------- |
   | 10w    | 48897          | 51880             | 54781          | 78275             |
   | 100w   | 463706         | 511648            | 532717         | 774087            |
   | 2000w  | 9368427        | 10634771          | -              | -                 |

2. 读取性能测试(ms)：

   | 数据量 | mysql（样例1） | influxdb（样例1） | mysql（样例2） | influxdb（样例2） |
   | ------ | -------------- | ----------------- | -------------- | ----------------- |
   | 10w    | 2341           | 1206              | -              | 15070             |
   | 100w   | 8869           | 6150              | -              | -                 |

3. 聚合性能测试(ms)：

   - 样例1：

   | 样例                                         | mysql（10w/100w） | influxdb（10w/100w） |
   | -------------------------------------------- | ----------------- | -------------------- |
   | tag1 = tag1_0                                | 27 / 751          | 26 / 567             |
   | tag1 = tag1_1，每5分钟平均值                 | 616 / 714         | 16 / 276             |
   | tag1 = tag1_2，每1小时最大值                 | 31 / 1145         | 63 / 109             |
   | tag1 = tag1_3，每天总和                      | 15 / 1408         | 60 / 10              |
   | tag1 = tag1_4，val1>20                       | 14 / 1318         | 12 / 169             |
   | tag1 = tag1_0 or tag1 = tag1_3               | 86 / 2502         | 25 / 413             |
   | 2023-03-01 00:00:00<time<2023-03-01 12:00:00 | 328 / 345         | 254 / 259            |

   - 样例2：

   | 样例                                           | mysql（10w/100w） | influxdb（10w/100w） |
   | ---------------------------------------------- | ----------------- | -------------------- |
   | tag1 = tag1_0，tag2 = tag2_0                   | 1699 / 26149      | 662 / 9138           |
   | tag1 = tag1_1，tag2 = tag2_1，每5分钟平均值    | 706 / 23083       | 34 / 1446            |
   | tag1 = tag1_2，tag2 = tag2_2，每1小时最大值    | 387 / 11478       | 7 / 362              |
   | tag1 = tag1_3，tag2 = tag2_3，每天总和         | 95 / 26052        | 9 / 330              |
   | tag1 = tag1_4，tag2 = tag2_4，val1>20，val2<10 | 827 / 19449       | 188 / 2402           |
   | 2023-03-01 00:00:00<time<2023-03-01 12:00:00   | 6833 / 7650       | 7438 / 6694          |

   

   ## 测试结果：

   1. 写入性能测试：mysql略优于influxdb
   2. 读取性能测试： influxdb性能略优于mysql
   3. 聚合性能测试： 在100w+的数据下，influxdb性能远优于mysql

   ## 结果汇总：

   ​	就测试结果下来，相较于mysql，influxdb在写入方面略低mysql，但优势在于不需要像mysql需要对数据进行分表，并且在数据读取于数据聚合方面性能都优于mysql。

   ​	另外根据网上找的资料，理论上influxdb在写入方面的性能应该也是优于mysql的，这一方面也许是我对influxdb还没完全熟悉，缺少针对性的对数据库进行配置导致的。这方面如果项目采用了influxdb，我会进一步学习的。